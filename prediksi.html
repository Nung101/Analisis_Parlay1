<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Prediksi xG: O/U & HDP</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    textarea { width: 100%; height: 100px; }
    button { padding: 10px; margin-top: 10px; }
    .hasil { margin-top: 20px; padding: 10px; border: 1px solid #aaa; }
  </style>
</head>
<body>
  <h2>Hitung Prediksi xG: Over/Under & Handicap</h2>

  <p>Masukkan data xG dan xGA tim (pisahkan dengan koma, baris = 1 pertandingan).<br>
     Contoh: <code>1.56,0.95</code></p>

  <h3>Tim A</h3>
  <textarea id="timA"></textarea>

  <h3>Tim B</h3>
  <textarea id="timB"></textarea>

  <button onclick="hitung()">Hitung Prediksi</button>

  <div class="hasil" id="output"></div>

<script>
function parseInput(txt) {
  let lines = txt.trim().split("\n");
  let xG = [], xGA = [];
  lines.forEach(l => {
    let parts = l.split(",").map(Number);
    if (parts.length >= 2) {
      xG.push(parts[0]);
      xGA.push(parts[1]);
    }
  });
  let avgxG = xG.reduce((a,b)=>a+b,0)/xG.length || 0;
  let avgxGA = xGA.reduce((a,b)=>a+b,0)/xGA.length || 0;
  return {avgxG, avgxGA};
}

function hitung() {
  let A = parseInput(document.getElementById("timA").value);
  let B = parseInput(document.getElementById("timB").value);

  // Prediksi total gol (Over/Under)
  let totalGol = (A.avgxG + A.avgxGA + B.avgxG + B.avgxGA) / 2;

  let ou = totalGol >= 2.7 ? "Over 2.5"
        : totalGol <= 2.3 ? "Under 2.5"
        : "50/50 (bisa Over bisa Under)";

  // Prediksi HDP (selisih xG)
  let selisih = A.avgxG - B.avgxG;
  let hdp;
  if (Math.abs(selisih) < 0.3) hdp = "Level Ball (0)";
  else if (Math.abs(selisih) < 0.6) hdp = (selisih > 0 ? "Tim A -0.5" : "Tim B -0.5");
  else if (Math.abs(selisih) < 1.0) hdp = (selisih > 0 ? "Tim A -0.75" : "Tim B -0.75");
  else hdp = (selisih > 0 ? "Tim A -1" : "Tim B -1");

  document.getElementById("output").innerHTML = `
    <b>Rata-rata Tim A</b><br>xG: ${A.avgxG.toFixed(2)} | xGA: ${A.avgxGA.toFixed(2)}<br>
    <b>Rata-rata Tim B</b><br>xG: ${B.avgxG.toFixed(2)} | xGA: ${B.avgxGA.toFixed(2)}<br><br>
    <b>Prediksi Over/Under:</b> ${ou}<br>
    <b>Prediksi Handicap (HDP):</b> ${hdp}<br>
    <b>Total Gol Estimasi:</b> ${totalGol.toFixed(2)}
  `;
}
</script>
</body>
</html>