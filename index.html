<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Prediksi OU & HDP (Offline)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    textarea { width: 100%; height: 150px; }
    button { margin-top: 10px; padding: 10px; }
    .hasil { background: white; padding: 15px; margin-top: 20px; border-radius: 8px; }
  </style>
</head>
<body>
  <h2>‚öΩ Prediksi Over/Under & HDP</h2>
  <p>Paste JSON tim dari understat ke kotak di bawah:</p>

  <h3>Data Tim 1</h3>
  <textarea id="tim1"></textarea>

  <h3>Data Tim 2</h3>
  <textarea id="tim2"></textarea>

  <button onclick="analisis()">üîç Analisis Prediksi</button>

  <div id="hasil" class="hasil"></div>

  <script>
    function hitungRataXG(json) {
      let totalXG = 0, totalGA = 0;
      const matches = json.history || [];
      matches.forEach(m => {
        totalXG += parseFloat(m.xG);
        totalGA += parseFloat(m.xGA);
      });
      return {
        avgXG: totalXG / matches.length,
        avgGA: totalGA / matches.length
      };
    }

    function analisis() {
      try {
        const data1 = JSON.parse(document.getElementById("tim1").value);
        const data2 = JSON.parse(document.getElementById("tim2").value);

        const t1 = hitungRataXG(data1);
        const t2 = hitungRataXG(data2);

        // Prediksi skor berdasarkan rata-rata
        const prediksi1 = (t1.avgXG + t2.avgGA) / 2;
        const prediksi2 = (t2.avgXG + t1.avgGA) / 2;
        const totalGol = prediksi1 + prediksi2;

        let prediksiOU = totalGol > 2.5 ? "Over 2.5" : "Under 2.5";
        let prediksiHDP = prediksi1 > prediksi2 ? "Tim 1 lebih unggul" : "Tim 2 lebih unggul";

        document.getElementById("hasil").innerHTML = `
          <b>üìä Rata-rata xG & xGA:</b><br>
          Tim 1 ‚Üí xG: ${t1.avgXG.toFixed(2)} | xGA: ${t1.avgGA.toFixed(2)}<br>
          Tim 2 ‚Üí xG: ${t2.avgXG.toFixed(2)} | xGA: ${t2.avgGA.toFixed(2)}<br><br>
          
          <b>üîÆ Prediksi Skor:</b> ${prediksi1.toFixed(1)} - ${prediksi2.toFixed(1)}<br>
          <b>‚öΩ Total Gol Prediksi:</b> ${totalGol.toFixed(2)}<br>
          <b>OU:</b> ${prediksiOU}<br>
          <b>HDP:</b> ${prediksiHDP}
        `;
      } catch (e) {
        alert("‚ùå Data JSON tidak valid. Pastikan paste dari Understat dengan benar.");
      }
    }
  </script>
</body>
</html>