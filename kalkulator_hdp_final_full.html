<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Kalkulator HDP, O/U, Value Bet & Odds Trap ‚Äî Full</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --muted:#6b7280; --accent:#0b74ff;
    }
    body{
      font-family: Inter, "Segoe UI", Arial, sans-serif;
      background: var(--bg);
      color: #111;
      margin: 18px;
    }
    .wrap{ max-width:1100px; margin:0 auto; }
    .card{
      background: var(--card);
      border:1px solid #e6e9ef;
      padding:16px;
      border-radius:10px;
      box-shadow:0 8px 30px rgba(2,6,23,0.04);
    }
    h1{ margin:0 0 8px; font-size:20px; }
    .small{ font-size:13px; color:var(--muted); }
    .row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }
    .col{ flex:1; min-width:220px; }
    label{ display:block; font-weight:600; margin-bottom:6px; }
    input, select, button, textarea{
      padding:8px 10px;
      border:1px solid #d1d5db;
      border-radius:8px;
      font-size:14px;
      width:100%;
      box-sizing:border-box;
    }
    button{ background:var(--accent); color:#fff; border:none; cursor:pointer; }
    button.secondary{ background:#eef2ff; color:#0b3ca6; border:1px solid #dbeafe; }
    #result{
      margin-top:14px;
      white-space:pre-wrap;
      padding:12px;
      background:#fbfdff;
      border-radius:8px;
      border:1px solid #edf2ff;
    }
    .muted{ color:var(--muted); font-size:13px; }
    .note{ font-size:13px; color:#374151; margin-top:8px; }
    code{ font-family:monospace; background:#f3f4f6; padding:2px 6px; border-radius:4px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>‚öΩ Kalkulator HDP, O/U, Value Bet & Odds Trap ‚Äî Full</h1>
      <div class="small">Versi lengkap. Isi data manual ‚Äî nanti bagian 2/3/4 menyambung dan menjalankan perhitungan di browser.</div>

      <hr />

      <div class="row">
        <div class="col">
          <label for="leagueSelect">Pilih Liga / Kompetisi</label>
          <select id="leagueSelect">
            <option value="Premier League">Premier League</option>
            <option value="Championship">Championship</option>
            <option value="FA Cup">FA Cup</option>
            <option value="EFL Cup (Carabao Cup)">EFL Cup (Carabao Cup)</option>
            <option value="La Liga">La Liga</option>
            <option value="Segunda Divisi√≥n">Segunda Divisi√≥n</option>
            <option value="Copa del Rey">Copa del Rey</option>
            <option value="Serie A">Serie A</option>
            <option value="Serie B">Serie B</option>
            <option value="Coppa Italia">Coppa Italia</option>
            <option value="Bundesliga">Bundesliga</option>
            <option value="2. Bundesliga">2. Bundesliga</option>
            <option value="DFB-Pokal">DFB-Pokal</option>
            <option value="Ligue 1">Ligue 1</option>
            <option value="Ligue 2">Ligue 2</option>
            <option value="Coupe de France">Coupe de France</option>
            <option value="Eredivisie">Eredivisie</option>
            <option value="Eerste Divisie">Eerste Divisie</option>
            <option value="KNVB Cup">KNVB Cup</option>
            <option value="Primeira Liga">Primeira Liga</option>
            <option value="Ta√ßa de Portugal">Ta√ßa de Portugal</option>
            <option value="Swiss Super League">Swiss Super League</option>
            <option value="Swiss Cup">Swiss Cup</option>
            <option value="S√ºper Lig">S√ºper Lig</option>
            <option value="Turkish Cup">Turkish Cup</option>
            <option value="Super League Greece">Super League Greece</option>
            <option value="Greek Cup">Greek Cup</option>
            <option value="Russian Premier League">Russian Premier League</option>
            <option value="Russian Cup">Russian Cup</option>
            <option value="Liga I">Liga I</option>
            <option value="Cupa Rom√¢niei">Cupa Rom√¢niei</option>
            <option value="Ekstraklasa">Ekstraklasa</option>
            <option value="Polish Cup">Polish Cup</option>
            <option value="HNL">HNL</option>
            <option value="Croatian Cup">Croatian Cup</option>
            <option value="Latvia Higher League">Latvia Higher League</option>
            <option value="Latvian Cup">Latvian Cup</option>
            <option value="Meistriliiga">Meistriliiga</option>
            <option value="Estonian Cup">Estonian Cup</option>
            <option value="Allsvenskan">Allsvenskan</option>
            <option value="Svenska Cupen">Svenska Cupen</option>
            <option value="Eliteserien">Eliteserien</option>
            <option value="Norwegian Cup">Norwegian Cup</option>
            <option value="Superliga">Superliga (Denmark)</option>
            <option value="1st Division">1st Division</option>
            <option value="Danish Cup">Danish Cup</option>
            <option value="Veikkausliiga">Veikkausliiga</option>
            <option value="Ykk√∂sliiga">Ykk√∂sliiga</option>
            <option value="Ykk√∂nen">Ykk√∂nen</option>
            <option value="Suomen Cup">Suomen Cup</option>
            <option value="√örvalsdeild">√örvalsdeild</option>
            <option value="Icelandic Cup">Icelandic Cup</option>
            <option value="Premier Division">Premier Division (IRL)</option>
            <option value="FAI Cup">FAI Cup</option>
            <option value="UEFA Champions League">UEFA Champions League</option>
            <option value="UEFA Europa League">UEFA Europa League</option>
            <option value="UEFA Conference League">UEFA Conference League</option>
            <option value="World Cup">World Cup</option>
          </select>

          <div style="margin-top:8px">
            <label>League Avg (otomatis)</label>
            <input id="leagueAvg" type="number" readonly />
          </div>
        </div>

        <div class="col">
          <label>Home GF (gol per laga)</label>
          <input id="homeGF" type="number" step="0.01" placeholder="contoh: 1.45" />
          <label style="margin-top:8px">Home GA (kebobolan per laga)</label>
          <input id="homeGA" type="number" step="0.01" placeholder="contoh: 1.20" />
        </div>

        <div class="col">
          <label>Away GF (gol per laga)</label>
          <input id="awayGF" type="number" step="0.01" placeholder="contoh: 1.30" />
          <label style="margin-top:8px">Away GA (kebobolan per laga)</label>
          <input id="awayGA" type="number" step="0.01" placeholder="contoh: 1.40" />
        </div>
              </div>
              <hr />

      <div class="row">
        <div class="col">
          <label>Odds Over 2.5</label>
          <input id="oddsOver" type="number" step="0.01" value="1.90" />
          <label style="margin-top:8px">Odds Under 2.5</label>
          <input id="oddsUnder" type="number" step="0.01" value="1.90" />
        </div>

        <div class="col">
          <label>Odds Home Win</label>
          <input id="oddsHome" type="number" step="0.01" value="2.20" />
          <label style="margin-top:8px">Odds Draw</label>
          <input id="oddsDraw" type="number" step="0.01" value="3.20" />
        </div>

        <div class="col">
          <label>Odds Away Win</label>
          <input id="oddsAway" type="number" step="0.01" value="3.10" />
          <label style="margin-top:8px">Value Bet Threshold (%)</label>
          <input id="valueThreshPercent" type="number" step="0.1" value="5" />
        </div>
      </div>

      <hr />

      <div class="row">
        <div class="col">
          <label>Line HDP (mis. -0.5, +0.25, dst)</label>
          <input id="hdpLine" type="number" step="0.25" value="-0.5" />
        </div>
        <div class="col">
          <label>Odds Home (HDP)</label>
          <input id="oddsHdpHome" type="number" step="0.01" value="1.92" />
        </div>
        <div class="col">
          <label>Odds Away (HDP)</label>
          <input id="oddsHdpAway" type="number" step="0.01" value="1.98" />
        </div>
      </div>

      <div style="margin-top:12px">
        <button id="btnAnalyze">üîé Analisis Sekarang</button>
        <button id="btnReset" class="secondary" style="margin-left:8px">Reset</button>
      </div>

      <div id="result"></div>
      <script>
const leagueMeta = {
  "Premier League": { avg:2.65, baseK:1.2, homeBias:0.08, reliability:0.9 },
  "Championship": { avg:2.45, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "FA Cup": { avg:3.20, baseK:1.25, homeBias:0.05, reliability:0.7 },
  "EFL Cup (Carabao Cup)": { avg:3.10, baseK:1.25, homeBias:0.05, reliability:0.7 },

  "La Liga": { avg:2.62, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Segunda Divisi√≥n": { avg:2.55, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Copa del Rey": { avg:2.95, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Serie A": { avg:2.56, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Serie B": { avg:2.47, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Coppa Italia": { avg:3.00, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Bundesliga": { avg:3.14, baseK:1.25, homeBias:0.09, reliability:0.95 },
  "2. Bundesliga": { avg:3.02, baseK:1.2, homeBias:0.08, reliability:0.9 },
  "DFB-Pokal": { avg:4.19, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "Ligue 1": { avg:2.96, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Ligue 2": { avg:2.41, baseK:1.2, homeBias:0.06, reliability:0.85 },
  "Coupe de France": { avg:3.20, baseK:1.25, homeBias:0.05, reliability:0.7 },

  "Eredivisie": { avg:2.98, baseK:1.2, homeBias:0.08, reliability:0.9 },
  "Eerste Divisie": { avg:3.10, baseK:1.25, homeBias:0.07, reliability:0.85 },
  "KNVB Cup": { avg:3.80, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "Primeira Liga": { avg:2.87, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Ta√ßa de Portugal": { avg:2.90, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Swiss Super League": { avg:3.33, baseK:1.25, homeBias:0.08, reliability:0.9 },
  "Swiss Cup": { avg:3.50, baseK:1.25, homeBias:0.05, reliability:0.7 },

  "S√ºper Lig": { avg:2.94, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Turkish Cup": { avg:2.90, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Super League Greece": { avg:2.97, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Greek Cup": { avg:2.30, baseK:1.2, homeBias:0.05, reliability:0.7 },

  "Russian Premier League": { avg:2.70, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Russian Cup": { avg:2.80, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Liga I": { avg:2.67, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Cupa Rom√¢niei": { avg:3.20, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Ekstraklasa": { avg:2.85, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Polish Cup": { avg:2.90, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "HNL": { avg:2.36, baseK:1.2, homeBias:0.07, reliability:0.8 },
  "Croatian Cup": { avg:3.10, baseK:1.25, homeBias:0.05, reliability:0.7 },

  "Latvia Higher League": { avg:2.89, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Latvian Cup": { avg:4.90, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "Meistriliiga": { avg:3.22, baseK:1.25, homeBias:0.07, reliability:0.85 },
  "Estonian Cup": { avg:4.50, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "Allsvenskan": { avg:2.83, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Svenska Cupen": { avg:3.10, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Eliteserien": { avg:2.83, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Norwegian Cup": { avg:3.60, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "Superliga": { avg:3.27, baseK:1.25, homeBias:0.08, reliability:0.9 },
  "1st Division": { avg:2.81, baseK:1.2, homeBias:0.07, reliability:0.85 },
  "Danish Cup": { avg:4.00, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "Veikkausliiga": { avg:2.93, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "Ykk√∂sliiga": { avg:3.02, baseK:1.25, homeBias:0.07, reliability:0.85 },
  "Ykk√∂nen": { avg:3.51, baseK:1.25, homeBias:0.07, reliability:0.8 },
  "Suomen Cup": { avg:4.00, baseK:1.3, homeBias:0.05, reliability:0.7 },

  "√örvalsdeild": { avg:3.62, baseK:1.3, homeBias:0.08, reliability:0.8 },
  "Icelandic Cup": { avg:5.00, baseK:1.35, homeBias:0.05, reliability:0.7 },

  "Premier Division": { avg:2.26, baseK:1.2, homeBias:0.07, reliability:0.8 },
  "FAI Cup": { avg:3.00, baseK:1.25, homeBias:0.05, reliability:0.75 },

  "UEFA Champions League": { avg:3.10, baseK:1.25, homeBias:0.07, reliability:0.9 },
  "UEFA Europa League": { avg:2.85, baseK:1.2, homeBias:0.07, reliability:0.9 },
  "UEFA Conference League": { avg:2.71, baseK:1.2, homeBias:0.07, reliability:0.85 },

  "World Cup": { avg:2.70, baseK:1.2, homeBias:0.07, reliability:0.85 }
};

document.getElementById("leagueSelect").addEventListener("change", function(){
  const sel = this.value;
  const meta = leagueMeta[sel];
  document.getElementById("leagueAvg").value = meta ? meta.avg : "";
});
      
function poisson(lmb, k) {
  return (Math.pow(lmb, k) * Math.exp(-lmb)) / factorial(k);
}
function factorial(n) {
  if (n === 0) return 1;
  let res = 1;
  for (let i = 1; i <= n; i++) res *= i;
  return res;
}

function analyze() {
  const league = document.getElementById("leagueSelect").value;
  const meta = leagueMeta[league] || {avg:2.5, baseK:1.2, homeBias:0.08, reliability:0.5};

  let homeGF = parseFloat(document.getElementById("homeGF").value) || 1.4;
  let homeGA = parseFloat(document.getElementById("homeGA").value) || 1.2;
  let awayGF = parseFloat(document.getElementById("awayGF").value) || 1.3;
  let awayGA = parseFloat(document.getElementById("awayGA").value) || 1.5;

  const leagueAvg = meta.avg;
  const lambdaHome = (homeGF * awayGA / leagueAvg) * (1 + meta.homeBias);
  const lambdaAway = (awayGF * homeGA / leagueAvg);

  let maxGoals = 6;
  let matrix = [];
  let probHome = 0, probDraw = 0, probAway = 0;
  let over25 = 0, under25 = 0;

  for (let i=0;i<=maxGoals;i++){
    matrix[i] = [];
    for (let j=0;j<=maxGoals;j++){
      const p = poisson(lambdaHome,i)*poisson(lambdaAway,j);
      matrix[i][j] = p;
      if(i>j) probHome += p;
      else if(i===j) probDraw += p;
      else probAway += p;
      if(i+j >= 3) over25 += p;
      else under25 += p;
    }
  }

  const oddsOver = parseFloat(document.getElementById("oddsOver").value)||2.0;
  const oddsUnder = parseFloat(document.getElementById("oddsUnder").value)||2.0;
  const oddsHome = parseFloat(document.getElementById("oddsHome").value)||2.0;
  const oddsDraw = parseFloat(document.getElementById("oddsDraw").value)||3.0;
  const oddsAway = parseFloat(document.getElementById("oddsAway").value)||3.0;

  const fairOver = 1/over25;
  const fairUnder = 1/under25;
  const fairHome = 1/probHome;
  const fairDraw = 1/probDraw;
  const fairAway = 1/probAway;

  const evOver = (over25*oddsOver-1)*100;
  const evUnder = (under25*oddsUnder-1)*100;
  const evHome = (probHome*oddsHome-1)*100;
  const evDraw = (probDraw*oddsDraw-1)*100;
  const evAway = (probAway*oddsAway-1)*100;

  const valueThresh = (parseFloat(document.getElementById("valueThreshPercent").value)||5)/100;

  let picks = [];
  if(evOver/100 > valueThresh) picks.push("Over 2.5");
  if(evUnder/100 > valueThresh) picks.push("Under 2.5");
  if(evHome/100 > valueThresh) picks.push("Home Win");
  if(evDraw/100 > valueThresh) picks.push("Draw");
  if(evAway/100 > valueThresh) picks.push("Away Win");

  // HDP
  const hdpLine = parseFloat(document.getElementById("hdpLine").value)||0;
  const oddsHdpHome = parseFloat(document.getElementById("oddsHdpHome").value)||2.0;
  const oddsHdpAway = parseFloat(document.getElementById("oddsHdpAway").value)||2.0;

  let hdpHomeProb = 0, hdpAwayProb = 0;
  for (let i=0;i<=maxGoals;i++){
    for (let j=0;j<=maxGoals;j++){
      const p = matrix[i][j];
      const diff = i-j+hdpLine;
      if(diff>0) hdpHomeProb+=p;
      else if(diff<0) hdpAwayProb+=p;
      else {hdpHomeProb+=p/2; hdpAwayProb+=p/2;}
    }
  }

  const evHdpHome = (hdpHomeProb*oddsHdpHome-1)*100;
  const evHdpAway = (hdpAwayProb*oddsHdpAway-1)*100;
  if(evHdpHome/100 > valueThresh) picks.push("HDP Home");
  if(evHdpAway/100 > valueThresh) picks.push("HDP Away");

  let trap = "";
  if(oddsOver>2 && over25>0.55) trap="‚ö†Ô∏è Trap: Over terlalu tinggi!";
  if(oddsUnder>2 && under25>0.55) trap="‚ö†Ô∏è Trap: Under terlalu tinggi!";

  document.getElementById("result").innerHTML = `
    <h3>üìä Hasil Analisis</h3>
    <p>Œª Home: ${lambdaHome.toFixed(2)}, Œª Away: ${lambdaAway.toFixed(2)}</p>
    <p>Probabilitas ‚Äî Home: ${(probHome*100).toFixed(1)}%, Draw: ${(probDraw*100).toFixed(1)}%, Away: ${(probAway*100).toFixed(1)}%</p>
    <p>Over 2.5: ${(over25*100).toFixed(1)}%, Under 2.5: ${(under25*100).toFixed(1)}%</p>
    <p>Fair Odds ‚Äî Over: ${fairOver.toFixed(2)}, Under: ${fairUnder.toFixed(2)}, Home: ${fairHome.toFixed(2)}, Draw: ${fairDraw.toFixed(2)}, Away: ${fairAway.toFixed(2)}</p>
    <p>EV (%) ‚Äî Over: ${evOver.toFixed(1)}, Under: ${evUnder.toFixed(1)}, Home: ${evHome.toFixed(1)}, Draw: ${evDraw.toFixed(1)}, Away: ${evAway.toFixed(1)}</p>
    <p>HDP Prob ‚Äî Home: ${(hdpHomeProb*100).toFixed(1)}%, Away: ${(hdpAwayProb*100).toFixed(1)}%</p>
    <p>HDP EV (%) ‚Äî Home: ${evHdpHome.toFixed(1)}, Away: ${evHdpAway.toFixed(1)}</p>
    <h4>üéØ Rekomendasi: ${picks.join(", ")||"Tidak ada value bet"}</h4>
    <p style="color:red">${trap}</p>
  `;
}

document.getElementById("btnAnalyze").addEventListener("click", analyze);
document.getElementById("btnReset").addEventListener("click", ()=>location.reload());
      </script>
        </div>
  </div>
</body>
</html>
    
